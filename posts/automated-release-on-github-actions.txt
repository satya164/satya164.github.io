3:I[9275,[],""]
5:I[1343,[],""]
6:I[7786,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","231","static/chunks/231-c1c00e13a9884adf.js","185","static/chunks/app/layout-709b82eab753a829.js"],"script"]
7:I[9645,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","231","static/chunks/231-c1c00e13a9884adf.js","185","static/chunks/app/layout-709b82eab753a829.js"],"default"]
8:I[6747,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","231","static/chunks/231-c1c00e13a9884adf.js","185","static/chunks/app/layout-709b82eab753a829.js"],"NavBar"]
9:I[231,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","231","static/chunks/231-c1c00e13a9884adf.js","931","static/chunks/app/page-2372734ba39a4cae.js"],""]
4:["id","automated-release-on-github-actions","d"]
0:["YTV82sx3eHFSRVxDPHXKA",[[["",{"children":["posts",{"children":[["id","automated-release-on-github-actions","d"],{"children":["__PAGE__?{\"id\":\"automated-release-on-github-actions\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["id","automated-release-on-github-actions","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/daddea30ec70cb97.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","className":"__variable_1dcda3 __variable_de8755 __variable_08ede3","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","script",null,{"dangerouslySetInnerHTML":{"__html":"$6"}}],["$","$L7",null,{}]]}],["$","body",null,{"children":[["$","$L8",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}],["$","div",null,{"className":"styles_container__0CKa2","children":["$","footer",null,{"children":["Copyright Â© ",2025," ",["$","$L9",null,{"href":"/about","children":"Satyajit Sahoo"}],". All rights reserved."]}]}]]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1737d2f1c22a72a3.css","precedence":"next","crossOrigin":"$undefined"}]],"$La"]]]]
b:I[5969,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","722","static/chunks/app/posts/%5Bid%5D/page-315b1d1af8182cf0.js"],"TableOfContent"]
c:I[9936,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","722","static/chunks/app/posts/%5Bid%5D/page-315b1d1af8182cf0.js"],"Pre"]
d:I[8173,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","722","static/chunks/app/posts/%5Bid%5D/page-315b1d1af8182cf0.js"],"Image"]
e:I[420,["401","static/chunks/363642f4-9e72429e661e47fa.js","344","static/chunks/e58a7f8f-3e17ebe2d129a781.js","173","static/chunks/173-26eb077acb4f64fe.js","459","static/chunks/459-ba55fbbe75738db5.js","722","static/chunks/app/posts/%5Bid%5D/page-315b1d1af8182cf0.js"],"SocialLinks"]
2:["$","main",null,{"children":[["$","article",null,{"children":[["$","$Lb",null,{"toc":[{"depth":2,"value":"Step 1","attributes":{},"children":[],"slug":"step-1"},{"depth":2,"value":"Step 2","attributes":{},"children":[],"slug":"step-2"},{"depth":2,"value":"Step 3","attributes":{},"children":[],"slug":"step-3"},{"depth":2,"value":"Step 4","attributes":{},"children":[],"slug":"step-4"}]}],["$","h1",null,{"children":"Automated Release on GitHub Actions"}],["$","div",null,{"className":"styles_meta__208KK","children":[["$","span",null,{"children":"6 min read"}],["$","time",null,{"dateTime":"2023-11-02","children":"November 2, 2023"}]]}],[["$","p",null,{"children":["There are many tools available to automate the release process for npm packages, such as ",["$","a",null,{"href":"https://github.com/lerna-lite/lerna-lite","rel":"nofollow","target":"_blank","children":"lerna-lite"}]," for monorepos, ",["$","a",null,{"href":"https://github.com/release-it/release-it","rel":"nofollow","target":"_blank","children":"Release It!"}]," for single packages etc. They can be used to automatically bump the version and generate changelog based on the commit messages using ",["$","a",null,{"href":"https://www.conventionalcommits.org/en/v1.0.0/","rel":"nofollow","target":"_blank","children":"Conventional Commits"}],", create a GitHub release, create a git tag, and publish the package to npm etc."]}],"\n",["$","p",null,{"children":"Generally, the release process is triggered manually by running a command on local machine. But automating the release process on GitHub Actions can be more convenient."}],"\n",["$","p",null,{"children":["This guide documents how to configure GitHub Actions to automatically release npm packages on every commit using ",["$","code",null,{"children":"release-it"}],". However, these steps can be adapted to other similar tools as well."]}],"\n",["$","h2",null,{"id":"step-1","children":["$","a",null,{"href":"#step-1","children":"Step 1"}]}],"\n",["$","p",null,{"children":["Install ",["$","code",null,{"children":"release-it"}]," and ",["$","code",null,{"children":"@release-it/conventional-changelog"}]," as dev dependencies:"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","$Lc",null,{"style":{"backgroundColor":"#292D3E","color":"#babed8"},"tabIndex":"0","data-language":"bash","data-theme":"material-theme-palenight","children":["$","code",null,{"data-language":"bash","data-theme":"material-theme-palenight","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFCB6B"},"children":"yarn"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" add"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" --dev"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" release-it"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" @release-it/conventional-changelog"}]]}]}]}]}],"\n",["$","p",null,{"children":["Configure ",["$","code",null,{"children":"release-it"}]," in the ",["$","code",null,{"children":"package.json"}]," file:"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":[["$","figcaption",null,{"data-rehype-pretty-code-title":"","data-language":"js","data-theme":"material-theme-palenight","children":"package.json"}],["$","$Lc",null,{"style":{"backgroundColor":"#292D3E","color":"#babed8"},"tabIndex":"0","data-language":"js","data-theme":"material-theme-palenight","children":["$","code",null,{"data-language":"js","data-theme":"material-theme-palenight","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"{"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"  ..."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"  \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"release-it"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#F07178"},"children":": "}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"    \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"git"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"commitMessage"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"chore: release ${version}"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"tagName"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"v${version}"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"    },"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"    \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"npm"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"publish"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#FF9CAC"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"    },"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"    \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"github"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"release"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#FF9CAC"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"    },"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"    \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"plugins"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"@release-it/conventional-changelog"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"        \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"preset"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"          \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"conventionalcommits"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"        },"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"        \""}],["$","span",null,{"style":{"color":"#F07178"},"children":"infile"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"CHANGELOG.md"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"  },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"  ..."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#89DDFF"},"children":"}"}]}]]}]}]]}],"\n",["$","h2",null,{"id":"step-2","children":["$","a",null,{"href":"#step-2","children":"Step 2"}]}],"\n",["$","p",null,{"children":["Create a NPM token with publish access. You can create one at ",["$","code",null,{"children":"https://www.npmjs.com/settings/[username]/tokens"}]," (replace ",["$","code",null,{"children":"[username]"}]," with your username):"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Click on ",["$","strong",null,{"children":"\"Generate New Token\""}]," and select ",["$","strong",null,{"children":"\"Granular Access Token\""}]]}],"\n",["$","li",null,{"children":"Provide a token name and expiration date"}],"\n",["$","li",null,{"children":["Under ",["$","strong",null,{"children":"\"Packages and scopes\""}],", select ",["$","strong",null,{"children":"\"Read and write\""}]," for permissions"]}],"\n",["$","li",null,{"children":["Then select ",["$","strong",null,{"children":"\"Only select packages and scopes\""}]," and select the package you want to publish"]}],"\n",["$","li",null,{"children":["Click ",["$","strong",null,{"children":"\"Generate token\""}]," and copy the token"]}],"\n"]}],"\n",["$","p",null,{"children":"Then the token needs to be added as a secret in the GitHub repository:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Go to the repository and click on ",["$","strong",null,{"children":"\"Settings\""}]]}],"\n",["$","li",null,{"children":["Click on ",["$","strong",null,{"children":"\"Secrets and variables\""}]," and choose ",["$","strong",null,{"children":"\"Actions\""}]]}],"\n",["$","li",null,{"children":["Click ",["$","strong",null,{"children":"\"New repository secret\""}]," and add the token as ",["$","code",null,{"children":"NPM_PUBLISH_TOKEN"}]]}],"\n",["$","li",null,{"children":["Click on ",["$","strong",null,{"children":"\"Add secret\""}]," to save the token"]}],"\n"]}],"\n",["$","p",null,{"children":"This token will be used to authenticate with NPM to publish the package."}],"\n",["$","div",null,{"className":"admonition admonition-warning","children":["\n",["$","p",null,{"className":"admonition-title","children":"Warning"}],"\n",["$","p",null,{"children":"Other collaborators on the repo can push actions that use this token and update the npm package acting as the user associated with the token. Make sure to use this only if you trust the collaborators on the repository."}],"\n"]}],"\n",["$","h2",null,{"id":"step-3","children":["$","a",null,{"href":"#step-3","children":"Step 3"}]}],"\n",["$","p",null,{"children":["Create a GitHub personal access token. You can create one at ",["$","a",null,{"href":"https://github.com/settings/personal-access-tokens/new","rel":"nofollow","target":"_blank","children":"github.com/settings/personal-access-tokens/new"}],":"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Provide name, description, and expiration date as per your preference"}],"\n",["$","li",null,{"children":["Under ",["$","strong",null,{"children":"\"Repository access\""}],", select ",["$","strong",null,{"children":"\"Only select repositories\""}]," and choose the repositories you want to set up the release workflow for"]}],"\n",["$","li",null,{"children":["Under ",["$","strong",null,{"children":"\"Permissions"}],"\", expand ",["$","strong",null,{"children":"\"Repository permissions\""}]," and set ",["$","strong",null,{"children":"\"Contents\""}]," to ",["$","strong",null,{"children":"\"Access: Read & write\""}]]}],"\n",["$","li",null,{"children":["Click ",["$","strong",null,{"children":"\"Generate token\""}]," and copy the generated token"]}],"\n"]}],"\n",["$","p",null,{"children":["Alternatively, you can create a classic token with the ",["$","code",null,{"children":"repo"}]," scope ",["$","a",null,{"href":"https://github.com/settings/tokens/new?scopes=repo&description=release-it","rel":"nofollow","target":"_blank","children":["under ",["$","strong",null,{"children":"Developer settings"}]," in your profile settings"]}],". However, it is highly recommended to use granular access tokens with the least required permissions."]}],"\n",["$","p",null,{"children":"Then the token needs to be added as a secret in the GitHub repository:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Go to the repository and click on ",["$","strong",null,{"children":"\"Settings\""}]]}],"\n",["$","li",null,{"children":["Click on ",["$","strong",null,{"children":"\"Secrets and variables\""}]," and choose ",["$","strong",null,{"children":"\"Actions\""}]]}],"\n",["$","li",null,{"children":["Click ",["$","strong",null,{"children":"\"New repository secret\""}]," and add the token as ",["$","code",null,{"children":"PERSONAL_ACCESS_TOKEN"}]]}],"\n",["$","li",null,{"children":["Click on ",["$","strong",null,{"children":"\"Add secret\""}]," to save the token"]}],"\n"]}],"\n",["$","p",null,{"children":"A personal access token is necessary to be able to push the changes back to the repository if the release branch is protected. The user associated with the token needs to have admin access to the repository and be able to bypass branch protection rules."}],"\n",["$","div",null,{"className":"admonition admonition-warning","children":["\n",["$","p",null,{"className":"admonition-title","children":"Warning"}],"\n",["$","p",null,{"children":"Other collaborators on the repo can push actions that use this token and push commits acting as the user associated with the token. Make sure to use this only if you trust the collaborators on the repository."}],"\n"]}],"\n",["$","p",null,{"children":["If there are no branch protection rules in the repository, then the ",["$","a",null,{"href":"https://docs.github.com/en/actions/concepts/security/github_token","rel":"nofollow","target":"_blank","children":["$","code",null,{"children":"GITHUB_TOKEN"}]}]," secret can be used instead of a personal access token. Note that commits made by using ",["$","code",null,{"children":"GITHUB_TOKEN"}]," won't trigger other workflows."]}],"\n",["$","h2",null,{"id":"step-4","children":["$","a",null,{"href":"#step-4","children":"Step 4"}]}],"\n",["$","p",null,{"children":["Create a GitHub Actions workflow file in ",["$","code",null,{"children":".github/workflows/release.yml"}]," with the following contents:"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":[["$","figcaption",null,{"data-rehype-pretty-code-title":"","data-language":"yml","data-theme":"material-theme-palenight","children":".github/workflows/release.yml"}],["$","$Lc",null,{"style":{"backgroundColor":"#292D3E","color":"#babed8"},"tabIndex":"0","data-language":"yml","data-theme":"material-theme-palenight","children":["$","code",null,{"data-language":"yml","data-theme":"material-theme-palenight","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Release package"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF9CAC"},"children":"on"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"  workflow_run"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    branches"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" main"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    workflows"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"      # List of workflows that runs tests, linting, etc."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"      # This ensures that the release is only triggered when the tests pass."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" CI"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    types"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" completed"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"jobs"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"  check-commit"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    runs-on"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ubuntu-latest"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"    # Skip if the workflow run for tests, linting etc. is not successful"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"    # Without this, the release will be triggered after the previous workflow run even if it failed."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    if"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ github.event.workflow_run.conclusion == 'success' }}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    outputs"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"      skip"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ steps.commit-message.outputs.skip }}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    steps"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Checkout"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        uses"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" actions/checkout@v3"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"      # Check if the commit message is a release commit"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"      # Without this, there will be an infinite loop of releases"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Get commit message"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        id"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" commit-message"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        run"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF","fontStyle":"italic"},"children":" |"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          MESSAGE=$(git log --format=%B -n 1 $(git log -1 --pretty=format:\"%h\"))"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          if [[ $MESSAGE == \"chore: release \"* ]]; then"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"            echo \"skip=true\" >> $GITHUB_OUTPUT"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          fi"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"  release"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    runs-on"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ubuntu-latest"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    needs"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" check-commit"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    permissions"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"      contents"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" read"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"      id-token"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" write"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"    # Skip if the commit message is a release commit"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    if"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ needs.check-commit.outputs.skip != 'true' }}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    steps"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Checkout"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        uses"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" actions/checkout@v3"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        with"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"          # This is needed to generate the changelog from commit messages"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"          fetch-depth"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#F78C6C"},"children":" 0"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"          token"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ secrets.PERSONAL_ACCESS_TOKEN }}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Setup Node.js"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        uses"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" actions/setup-node@v3"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Install dependencies"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        run"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" yarn install --immutable"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        shell"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" bash"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Configure Git"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        run"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF","fontStyle":"italic"},"children":" |"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          git config user.name \"${GITHUB_ACTOR}\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          git config user.email \"${GITHUB_ACTOR}@users.noreply.github.com\""}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#89DDFF"},"children":"      -"}],["$","span",null,{"style":{"color":"#F07178"},"children":" name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Create release"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        run"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#89DDFF","fontStyle":"italic"},"children":" |"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          npm config set //registry.npmjs.org/:_authToken $NPM_TOKEN"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C3E88D"},"children":"          yarn release-it --ci"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"        env"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"          GITHUB_TOKEN"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ secrets.PERSONAL_ACCESS_TOKEN }}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"          NPM_TOKEN"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ${{ secrets.NPM_PUBLISH_TOKEN }}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"          NPM_CONFIG_PROVENANCE"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#FF9CAC"},"children":" true"}]]}]]}]}]]}],"\n",["$","p",null,{"children":"There are 2 important things to note in this workflow:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["The workflow runs on the ",["$","code",null,{"children":"workflow_run"}]," event. This event is triggered when another workflow is run. In this case, the ",["$","code",null,{"children":"CI"}]," workflow is run on every commit to the ",["$","code",null,{"children":"main"}]," branch. The ",["$","code",null,{"children":"release"}]," workflow is triggered when the ",["$","code",null,{"children":"CI"}]," workflow is completed. You may need to change the name according to the name of the workflow that runs tests, linting, etc. in your repository."]}],"\n",["$","li",null,{"children":["There are 2 jobs in the workflow. The first job checks if the commit message is a release commit. If it is, then the second job is skipped. This is to prevent an infinite loop of releases. The second job runs ",["$","code",null,{"children":"release-it"}]," to publish the package."]}],"\n"]}],"\n",["$","p",null,{"children":["Additionally, setting ",["$","code",null,{"children":"NPM_CONFIG_PROVENANCE"}]," to ",["$","code",null,{"children":"true"}]," will generate a ",["$","a",null,{"href":"https://docs.npmjs.com/generating-provenance-statements","rel":"nofollow","target":"_blank","children":"provenance statement"}]," when publishing the package. This lets others verify where and how your package was built. This also needs the ",["$","code",null,{"children":"id-token: write"}]," permission in the ",["$","code",null,{"children":"permissions"}]," section of the job."]}],"\n",["$","p",null,{"children":["After configuring, this workflow automatically publishes a new version of the package on every commit to the ",["$","code",null,{"children":"main"}]," branch after the ",["$","code",null,{"children":"CI"}]," workflow is successful."]}],"\n",["$","p",null,{"children":["$","$Ld",null,{"alt":"Release workflow","src":{"src":"/_next/static/media/release-workflow.26d913e6.png","height":476,"width":1232,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAT0lEQVR42gUASQqAINBHBGFGJqjlMuZCI1qHiP7/piBnf3coA+Vs1XSWIxN0kRNXBFrH+/O5a1cc1twec1QbK9Eh2YjKJqFB+rhBMQGhXD+75QxZszFEvQAAAABJRU5ErkJggg==","blurWidth":8,"blurHeight":3}}]}],"\n",["$","p",null,{"children":["Instead of publishing on every commit, an alternative way could be to have the release workflow configured, and run the workflow manually from the ",["$","strong",null,{"children":"Actions"}]," tab in the repository when a new release is needed. This can be done by using the ",["$","code",null,{"children":"workflow_dispatch"}]," event to the ",["$","code",null,{"children":"on"}]," section:"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":[["$","figcaption",null,{"data-rehype-pretty-code-title":"","data-language":"yml","data-theme":"material-theme-palenight","children":".github/workflows/release.yml"}],["$","$Lc",null,{"style":{"backgroundColor":"#292D3E","color":"#babed8"},"tabIndex":"0","data-language":"yml","data-theme":"material-theme-palenight","children":["$","code",null,{"data-language":"yml","data-theme":"material-theme-palenight","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"name"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" Release package"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF9CAC"},"children":"on"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"  workflow_dispatch"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"jobs"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"  release"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    runs-on"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" ubuntu-latest"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F07178"},"children":"    steps"}],["$","span",null,{"style":{"color":"#89DDFF"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#676E95","fontStyle":"italic"},"children":"      # Same steps as before"}]}]]}]}]]}],"\n",["$","p",null,{"children":["See the GitHub documentation for ",["$","a",null,{"href":"https://docs.github.com/en/actions/using-workflows/manually-running-a-workflow","rel":"nofollow","target":"_blank","children":"Manually running a workflow"}]," for more details."]}]]]}],["$","$Le",null,{}]]}]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Automated Release on GitHub Actions Â· satya164's blog"}],["$","meta","3",{"name":"description","content":"Releasing an npm package usually has a lot of steps. This is a guide to setting up automated releases for npm packages on GitHub Actions using release-it."}],["$","meta","4",{"property":"og:title","content":"Automated Release on GitHub Actions"}],["$","meta","5",{"property":"og:description","content":"Releasing an npm package usually has a lot of steps. This is a guide to setting up automated releases for npm packages on GitHub Actions using release-it."}],["$","meta","6",{"property":"og:type","content":"article"}],["$","meta","7",{"property":"article:published_time","content":"2023-11-02T00:00:00.000Z"}],["$","meta","8",{"property":"article:author","content":"Satyajit Sahoo"}],["$","meta","9",{"name":"twitter:card","content":"summary"}],["$","meta","10",{"name":"twitter:creator","content":"@satya164"}],["$","meta","11",{"name":"twitter:title","content":"Automated Release on GitHub Actions"}],["$","meta","12",{"name":"twitter:description","content":"Releasing an npm package usually has a lot of steps. This is a guide to setting up automated releases for npm packages on GitHub Actions using release-it."}],["$","link","13",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","14",{"name":"next-size-adjust"}]]
1:null
